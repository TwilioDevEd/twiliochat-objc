<!DOCTYPE html><html><head><title>Twilio Chat</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Twilio Chat"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Twilio Chat</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn to implement a simple chat application using Twilio IP Messaging Client</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Twilio Chat Objective-C" class="chapter"><div data-title="Introduction" data-file="twiliochat/AppDelegate.m" class="step"><h2 id="introduction">Introduction</h2>
<p>Ready to implement a chat application using Twilio IP Messaging Client?
Here is how it works at a high level:</p>
<ol>
<li><p>We use <a href="//www.parse.com/">Parse</a> to handle session management and user
registration in our app. </p>
</li>
<li><p><a href="//www.twilio.com/ip-messaging">Twilio IP Messaging</a> is the core product
we&#39;ll be using to handle all the chat functionality.</p>
</li>
<li><p>We use a server side app to generate <a href="//www.twilio.com/docs/api/ip-messaging/guides/identity">user access
tokens</a> which contains
all your Twilio account information. The IP Messaging Client uses this token
to connect with the API</p>
</li>
<li><p><a href="//media.twiliocdn.com/sdk/rtc/ios/common/releases/0.1.7.b23-4ca8945/docs/">Twilio Common</a>
is the part of the SDK than handles access tokens and even refreshes them upon token
expiration.</p>
</li>
</ol>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/ip-messaging">IP Messaging API</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/quickstart-ios">iOS QuickStart</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/channels">Channels and Messages</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/channels">User Identity &amp; Access Tokens</a></li>
<li><a href="//media.twiliocdn.com/sdk/rtc/ios/ip-messaging/releases/0.13.3.b181-17abeb8/docs/">Twilio IP Messaging Client Reference</a></li>
<li><a href="//media.twiliocdn.com/sdk/rtc/ios/common/releases/0.1.7.b23-4ca8945/docs/">Twilio Common Reference</a></li>
</ul>
</div><div data-title="Initializing the Client" data-file="twiliochat/IPMessagingManager.m" data-highlight="109-156" class="step"><h2 id="initializing-the-ip-messaging-client">Initializing the IP Messaging Client</h2>
<p>The only thing you need to create a client, is an access token. This token
holds information about your Twilio account and IP Messaging API keys. You
can find an example application written in node that demonstrates how to
generate the token <a href="//github.com/TwilioDevEd/twiliochat">here</a>.</p>
<p>We use <a href="//parse.com/docs/cloudcode/guide#cloud-code-advanced-cloud-code-webhooks">Parse cloud code
webhooks</a>
to make a request to our server and get the access token.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//parse.com/docs/cloudcode/guide#cloud-code-advanced-cloud-code-webhooks">Parse cloud code webhooks</a></li>
</ul>
</div><div data-title="Getting the Channel List" data-file="twiliochat/ChannelManager.m" data-highlight="81-119" class="step"><h2 id="getting-the-channel-list">Getting the Channel List</h2>
<p>Our <code>ChannelManager</code> class takes care of everything related to channels.
The first thing we need to do when the class is initialized, is to store
a list of channels of type <code>TWMChannelList</code> that we get by calling the method <code>channelsListWithCompletion</code>
from the IP Messaging Client.</p>
<p>Once we have a <code>TWMChannelList</code> we can fetch the actual channels using the
<code>channelsList&#39;s</code> method <code>loadChannelsWithCompletion</code>. Once that operation
finishes successfully, call the method <code>allObjects</code> on the same object, to
get an array of channels.</p>
</div><div data-title="Join the General Channel" data-file="twiliochat/ChannelManager.m" data-highlight="33-77" class="step"><h2 id="join-the-general-channel">Join the General Channel</h2>
<p>This application will try to join a channel called &quot;General Channel&quot; when it starts.
If the channel doesn&#39;t exist, we&#39;ll create one with that name. The scope of
this example application will show you how to work only with public channels,
but the IP Messaging client allows you to create private channels and handle
invitations.</p>
<p>Once you have joined a channel, you can register a class as the <code>TWMChannelDelegate</code>
so you can start listening to events such as <code>messageAdded</code> or <code>memberJoined</code>.
We&#39;ll show you how to do this in the next step.</p>
</div><div data-title="Listen to Channel Events" data-file="twiliochat/MainChatViewController.m" data-highlight="228-265" class="step"><h2 id="listen-to-channel-events">Listen to Channel Events</h2>
<p>We registered <code>MainChatViewController</code> as the <code>TWMChannelDelegate</code>, and here
we implemented the following methods that listen to channel events:</p>
<ul>
<li><code>messageAdded</code>: When someone sends a message to the channel you are connected to.</li>
<li><code>channelDeleted</code>: When someone deletes a channel.</li>
<li><code>memberJoined</code>: When someone joins the channel.</li>
<li><code>memberLeft</code>: When someone leaves the channel.</li>
</ul>
<p>As you may have noticed, each one of these methods include useful objects
as parameters, such as the actual message that was added to the channel.</p>
</div><div data-title="Joining Other Channels" data-file="twiliochat/MainChatViewController.m" data-highlight="90-115" class="step"><h2 id="joining-other-channels">Joining Other Channels</h2>
<p>The application uses <a href="//github.com/John-Lluch/SWRevealViewController">SWRevealViewController</a>
to show a sidebar that contains a list of the channels created for that Twilio account.</p>
<p>When you tap on the name of a channel from the sidebar, that channel is set
on the <code>MainChatViewController</code>. The <code>setChannel</code> method takes care of joining
to the selected channel and loading the messages.</p>
</div><div data-title="Creating a Channel" data-file="twiliochat/ChannelManager.m" data-highlight="131-156" class="step"><h2 id="creating-a-channel">Creating a Channel</h2>
<p>We use an input dialog so the user can type the name of the new channel.
The only restriction here, is that the user can&#39;t create a channel called
&quot;General Channel&quot;. Other than that, creating a channel is as simple as calling
<code>createChannelWithFriendlyName</code></p>
</div><div data-title="Deleting a Channel" data-file="twiliochat/MenuViewController.m" data-highlight="83-95" class="step"><h2 id="deleting-a-channel">Deleting a Channel</h2>
<p>Deleting a channel is as simple as creating one. We&#39;ll use the <code>UITableView</code>
hability to delete a cell. Once you have figured out what channel is meant
to be deleted (from the selected cell index path), deleting it is as simple
as calling the channel&#39;s method <code>destroyWithCompletion</code>.</p>
</div><div data-title="Where to Next?" class="step"><h2 id="where-to-next-">Where to Next?</h2>
<p>That&#39;s it! We&#39;ve just implemented a simple chat application in objective-c.</p>
<p>Thanks for checking out this tutorial! If you have any feedback to share
with us, we&#39;d love to hear it. Tweet
<a href="http://twitter.com/twilio">@twilio</a> to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="twiliochat/AppDelegate.m" data-mode="objectivec">I2ltcG9ydCA8UGFyc2UvUGFyc2UuaD4KI2ltcG9ydCAiQXBwRGVsZWdhdGUuaCIKI2ltcG9ydCAiSVBNZXNzYWdpbmdNYW5hZ2VyLmgiCkBpbXBvcnQgRm91bmRhdGlvbjsKCgpAaW50ZXJmYWNlIEFwcERlbGVnYXRlICgpCgpAZW5kCgpAaW1wbGVtZW50YXRpb24gQXBwRGVsZWdhdGUKCgotIChCT09MKWFwcGxpY2F0aW9uOihVSUFwcGxpY2F0aW9uICopYXBwbGljYXRpb24gZGlkRmluaXNoTGF1bmNoaW5nV2l0aE9wdGlvbnM6KE5TRGljdGlvbmFyeSAqKWxhdW5jaE9wdGlvbnMgewogIFtQYXJzZSBlbmFibGVMb2NhbERhdGFzdG9yZV07CiAgCiAgTlNEaWN0aW9uYXJ5ICpkaWN0aW9uYXJ5ID0gW05TRGljdGlvbmFyeSBkaWN0aW9uYXJ5V2l0aENvbnRlbnRzT2ZGaWxlOltbTlNCdW5kbGUgbWFpbkJ1bmRsZV0gcGF0aEZvclJlc291cmNlOkAiS2V5cyIgb2ZUeXBlOkAicGxpc3QiXV07CiAgTlNTdHJpbmcgKnBhcnNlQXBwbGljYXRpb25JZCA9IFtkaWN0aW9uYXJ5IG9iamVjdEZvcktleTpAIlBhcnNlQXBwbGljYXRpb25JZCJdOwogIE5TU3RyaW5nICpwYXJzZUNsaWVudEtleSA9IFtkaWN0aW9uYXJ5IG9iamVjdEZvcktleTpAIlBhcnNlQ2xpZW50S2V5Il07CiAgCiAgW1BhcnNlIHNldEFwcGxpY2F0aW9uSWQ6cGFyc2VBcHBsaWNhdGlvbklkCiAgICAgICAgICAgICAgICBjbGllbnRLZXk6cGFyc2VDbGllbnRLZXldOwogIAogIFBGQUNMICpkZWZhdWx0QUNMID0gW1BGQUNMIEFDTF07CiAgW2RlZmF1bHRBQ0wgc2V0UHVibGljUmVhZEFjY2VzczpZRVNdOwogIFtQRkFDTCBzZXREZWZhdWx0QUNMOmRlZmF1bHRBQ0wgd2l0aEFjY2Vzc0ZvckN1cnJlbnRVc2VyOllFU107CiAgCiAgW1tJUE1lc3NhZ2luZ01hbmFnZXIgc2hhcmVkTWFuYWdlcl0gcHJlc2VudExhdW5jaFNjcmVlbl07CiAgW1tJUE1lc3NhZ2luZ01hbmFnZXIgc2hhcmVkTWFuYWdlcl0gcHJlc2VudFJvb3RWaWV3Q29udHJvbGxlcl07CiAgCiAgcmV0dXJuIFlFUzsKfQoKLSAodm9pZClhcHBsaWNhdGlvbldpbGxSZXNpZ25BY3RpdmU6KFVJQXBwbGljYXRpb24gKilhcHBsaWNhdGlvbiB7CiAgLy8gU2VudCB3aGVuIHRoZSBhcHBsaWNhdGlvbiBpcyBhYm91dCB0byBtb3ZlIGZyb20gYWN0aXZlIHRvIGluYWN0aXZlIHN0YXRlLiBUaGlzIGNhbiBvY2N1ciBmb3IgY2VydGFpbiB0eXBlcyBvZiB0ZW1wb3JhcnkgaW50ZXJydXB0aW9ucyAoc3VjaCBhcyBhbiBpbmNvbWluZyBwaG9uZSBjYWxsIG9yIFNNUyBtZXNzYWdlKSBvciB3aGVuIHRoZSB1c2VyIHF1aXRzIHRoZSBhcHBsaWNhdGlvbiBhbmQgaXQgYmVnaW5zIHRoZSB0cmFuc2l0aW9uIHRvIHRoZSBiYWNrZ3JvdW5kIHN0YXRlLgogIC8vIFVzZSB0aGlzIG1ldGhvZCB0byBwYXVzZSBvbmdvaW5nIHRhc2tzLCBkaXNhYmxlIHRpbWVycywgYW5kIHRocm90dGxlIGRvd24gT3BlbkdMIEVTIGZyYW1lIHJhdGVzLiBHYW1lcyBzaG91bGQgdXNlIHRoaXMgbWV0aG9kIHRvIHBhdXNlIHRoZSBnYW1lLgp9CgotICh2b2lkKWFwcGxpY2F0aW9uRGlkRW50ZXJCYWNrZ3JvdW5kOihVSUFwcGxpY2F0aW9uICopYXBwbGljYXRpb24gewogIC8vIFVzZSB0aGlzIG1ldGhvZCB0byByZWxlYXNlIHNoYXJlZCByZXNvdXJjZXMsIHNhdmUgdXNlciBkYXRhLCBpbnZhbGlkYXRlIHRpbWVycywgYW5kIHN0b3JlIGVub3VnaCBhcHBsaWNhdGlvbiBzdGF0ZSBpbmZvcm1hdGlvbiB0byByZXN0b3JlIHlvdXIgYXBwbGljYXRpb24gdG8gaXRzIGN1cnJlbnQgc3RhdGUgaW4gY2FzZSBpdCBpcyB0ZXJtaW5hdGVkIGxhdGVyLgogIC8vIElmIHlvdXIgYXBwbGljYXRpb24gc3VwcG9ydHMgYmFja2dyb3VuZCBleGVjdXRpb24sIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBpbnN0ZWFkIG9mIGFwcGxpY2F0aW9uV2lsbFRlcm1pbmF0ZTogd2hlbiB0aGUgdXNlciBxdWl0cy4KfQoKLSAodm9pZClhcHBsaWNhdGlvbldpbGxFbnRlckZvcmVncm91bmQ6KFVJQXBwbGljYXRpb24gKilhcHBsaWNhdGlvbiB7CiAgLy8gQ2FsbGVkIGFzIHBhcnQgb2YgdGhlIHRyYW5zaXRpb24gZnJvbSB0aGUgYmFja2dyb3VuZCB0byB0aGUgaW5hY3RpdmUgc3RhdGU7IGhlcmUgeW91IGNhbiB1bmRvIG1hbnkgb2YgdGhlIGNoYW5nZXMgbWFkZSBvbiBlbnRlcmluZyB0aGUgYmFja2dyb3VuZC4KfQoKLSAodm9pZClhcHBsaWNhdGlvbkRpZEJlY29tZUFjdGl2ZTooVUlBcHBsaWNhdGlvbiAqKWFwcGxpY2F0aW9uIHsKICAvLyBSZXN0YXJ0IGFueSB0YXNrcyB0aGF0IHdlcmUgcGF1c2VkIChvciBub3QgeWV0IHN0YXJ0ZWQpIHdoaWxlIHRoZSBhcHBsaWNhdGlvbiB3YXMgaW5hY3RpdmUuIElmIHRoZSBhcHBsaWNhdGlvbiB3YXMgcHJldmlvdXNseSBpbiB0aGUgYmFja2dyb3VuZCwgb3B0aW9uYWxseSByZWZyZXNoIHRoZSB1c2VyIGludGVyZmFjZS4KfQoKLSAodm9pZClhcHBsaWNhdGlvbldpbGxUZXJtaW5hdGU6KFVJQXBwbGljYXRpb24gKilhcHBsaWNhdGlvbiB7CiAgLy8gQ2FsbGVkIHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGFib3V0IHRvIHRlcm1pbmF0ZS4gU2F2ZSBkYXRhIGlmIGFwcHJvcHJpYXRlLiBTZWUgYWxzbyBhcHBsaWNhdGlvbkRpZEVudGVyQmFja2dyb3VuZDouCn0KCkBlbmQK</textarea>
<textarea class="saurus-file" data-file="twiliochat/IPMessagingManager.m" data-mode="objectivec">I2ltcG9ydCA8UGFyc2UvUGFyc2UuaD4KI2ltcG9ydCAiSVBNZXNzYWdpbmdNYW5hZ2VyLmgiCiNpbXBvcnQgIkNoYW5uZWxNYW5hZ2VyLmgiCgpAaW50ZXJmYWNlIElQTWVzc2FnaW5nTWFuYWdlciAoKQpAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudCAqY2xpZW50OwpAcHJvcGVydHkgKG5vbmF0b21pYywgZ2V0dGVyPWlzQ29ubmVjdGVkKSBCT09MIGNvbm5lY3RlZDsKQGVuZAoKc3RhdGljIE5TU3RyaW5nICogY29uc3QgVFdDTG9naW5WaWV3Q29udHJvbGxlck5hbWUgPSBAIkxvZ2luVmlld0NvbnRyb2xsZXIiOwpzdGF0aWMgTlNTdHJpbmcgKiBjb25zdCBUV0NNYWluVmlld0NvbnRyb2xsZXJOYW1lID0gQCJSZXZlYWxWaWV3Q29udHJvbGxlciI7CgpzdGF0aWMgTlNTdHJpbmcgKiBjb25zdCBUV0NUb2tlbktleSA9IEAidG9rZW4iOwoKQGltcGxlbWVudGF0aW9uIElQTWVzc2FnaW5nTWFuYWdlcgorIChpbnN0YW5jZXR5cGUpc2hhcmVkTWFuYWdlciB7CiAgc3RhdGljIElQTWVzc2FnaW5nTWFuYWdlciAqc2hhcmVkTXlNYW5hZ2VyID0gbmlsOwogIHN0YXRpYyBkaXNwYXRjaF9vbmNlX3Qgb25jZVRva2VuOwogIGRpc3BhdGNoX29uY2UoJm9uY2VUb2tlbiwgXnsKICAgIHNoYXJlZE15TWFuYWdlciA9IFtbc2VsZiBhbGxvY10gaW5pdF07CiAgfSk7CiAgcmV0dXJuIHNoYXJlZE15TWFuYWdlcjsKfQoKIyBwcmFnbWEgbWFyayBQcmVzZW50IHZpZXcgY29udHJvbGxlcnMKCi0gKHZvaWQpcHJlc2VudFJvb3RWaWV3Q29udHJvbGxlciB7CiAgaWYgKCFzZWxmLmhhc0lkZW50aXR5KSB7CiAgICBbc2VsZiBwcmVzZW50Vmlld0NvbnRyb2xsZXJCeU5hbWU6VFdDTG9naW5WaWV3Q29udHJvbGxlck5hbWVdOwogICAgcmV0dXJuOwogIH0KICBpZiAoIXNlbGYuaXNDb25uZWN0ZWQpIHsKICAgIFtzZWxmIGNvbm5lY3RDbGllbnRXaXRoQ29tcGxldGlvbjpeKEJPT0wgc3VjY2VzcywgTlNFcnJvciAqZXJyb3IpIHsKICAgICAgTlNTdHJpbmcgKnZpZXdDb250cm9sbGVyID0gc3VjY2VzcyA/IFRXQ01haW5WaWV3Q29udHJvbGxlck5hbWUgOiBUV0NMb2dpblZpZXdDb250cm9sbGVyTmFtZTsKICAgICAgW3NlbGYgcHJlc2VudFZpZXdDb250cm9sbGVyQnlOYW1lOnZpZXdDb250cm9sbGVyXTsKICAgIH1dOwogICAgcmV0dXJuOwogIH0KICBbc2VsZiBwcmVzZW50Vmlld0NvbnRyb2xsZXJCeU5hbWU6VFdDTWFpblZpZXdDb250cm9sbGVyTmFtZV07Cn0KCi0gKHZvaWQpcHJlc2VudFZpZXdDb250cm9sbGVyQnlOYW1lOihOU1N0cmluZyAqKXZpZXdDb250cm9sbGVyIHsKICBbc2VsZiBwcmVzZW50Vmlld0NvbnRyb2xsZXI6W1tzZWxmIHN0b3J5Ym9hcmRXaXRoTmFtZTpAIk1haW4iXSBpbnN0YW50aWF0ZVZpZXdDb250cm9sbGVyV2l0aElkZW50aWZpZXI6dmlld0NvbnRyb2xsZXJdXTsKfQoKLSAodm9pZClwcmVzZW50TGF1bmNoU2NyZWVuIHsKICBbc2VsZiBwcmVzZW50Vmlld0NvbnRyb2xsZXI6W1tzZWxmIHN0b3J5Ym9hcmRXaXRoTmFtZTpAIkxhdW5jaFNjcmVlbiJdIGluc3RhbnRpYXRlSW5pdGlhbFZpZXdDb250cm9sbGVyXV07Cn0KCi0gKHZvaWQpcHJlc2VudFZpZXdDb250cm9sbGVyOihVSVZpZXdDb250cm9sbGVyICopdmlld0NvbnRyb2xsZXIgewogIFVJV2luZG93ICp3aW5kb3cgPSBbW1VJQXBwbGljYXRpb24gc2hhcmVkQXBwbGljYXRpb25dLmRlbGVnYXRlIHdpbmRvd107CiAgd2luZG93LnJvb3RWaWV3Q29udHJvbGxlciA9IHZpZXdDb250cm9sbGVyOwp9CgotIChVSVN0b3J5Ym9hcmQgKilzdG9yeWJvYXJkV2l0aE5hbWU6KE5TU3RyaW5nICopbmFtZSB7CiAgcmV0dXJuIFtVSVN0b3J5Ym9hcmQgc3Rvcnlib2FyZFdpdGhOYW1lOiBuYW1lIGJ1bmRsZTogW05TQnVuZGxlIG1haW5CdW5kbGVdXTsKfQoKIyBwcmFnbWEgbWFyayBVc2VyIGFuZCBzZXNzaW9uIG1hbmFnZW1lbnQKCi0gKEJPT0wpaGFzSWRlbnRpdHkgewogIHJldHVybiBbUEZVc2VyIGN1cnJlbnRVc2VyXSAmJiBbW1BGVXNlciBjdXJyZW50VXNlcl0gaXNBdXRoZW50aWNhdGVkXTsKfQoKLSAodm9pZClyZWdpc3RlcldpdGhVc2VybmFtZTooTlNTdHJpbmcgKil1c2VybmFtZSBwYXNzd29yZDooTlNTdHJpbmcgKilwYXNzd29yZAogIGZ1bGxOYW1lOihOU1N0cmluZyAqKWZ1bGxOYW1lIGVtYWlsOihOU1N0cmluZyAqKWVtYWlsCiAgY29tcGxldGlvbjooU3RhdHVzV2l0aEVycm9ySGFuZGxlciljb21wbGV0aW9uIHsKCiAgUEZVc2VyICp1c2VyID0gW1BGVXNlciB1c2VyXTsKICB1c2VyLnVzZXJuYW1lID0gdXNlcm5hbWU7CiAgdXNlci5wYXNzd29yZCA9IHBhc3N3b3JkOwogIHVzZXIuZW1haWwgPSBlbWFpbDsKICB1c2VyW0AiZnVsbE5hbWUiXSA9IGZ1bGxOYW1lOwogIAogIFt1c2VyIHNpZ25VcEluQmFja2dyb3VuZFdpdGhCbG9jazpeKEJPT0wgc3VjY2VlZGVkLCBOU0Vycm9yICplcnJvcikgewogICAgaWYgKHN1Y2NlZWRlZCkgewogICAgICBbc2VsZiBjb25uZWN0Q2xpZW50V2l0aENvbXBsZXRpb246Y29tcGxldGlvbl07CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjb21wbGV0aW9uKSBjb21wbGV0aW9uKHN1Y2NlZWRlZCwgZXJyb3IpOwogIH1dOwp9CgotICh2b2lkKWxvZ2luV2l0aFVzZXJuYW1lOihOU1N0cmluZyAqKXVzZXJuYW1lIHBhc3N3b3JkOihOU1N0cmluZyAqKXBhc3N3b3JkCiAgY29tcGxldGlvbjooU3RhdHVzV2l0aEVycm9ySGFuZGxlciljb21wbGV0aW9uIHsKCiAgW1BGVXNlciBsb2dJbldpdGhVc2VybmFtZUluQmFja2dyb3VuZDp1c2VybmFtZSBwYXNzd29yZDpwYXNzd29yZAogICAgYmxvY2s6XihQRlVzZXIgKnVzZXIsIE5TRXJyb3IgKmVycm9yKSB7CiAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICBbc2VsZiBjb25uZWN0Q2xpZW50V2l0aENvbXBsZXRpb246Y29tcGxldGlvbl07CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChjb21wbGV0aW9uKSBjb21wbGV0aW9uKCFlcnJvciwgZXJyb3IpOwogICAgfV07Cn0KCi0gKHZvaWQpbG9nb3V0IHsKICBbUEZVc2VyIGxvZ091dF07CiAgc2VsZi5jb25uZWN0ZWQgPSBOTzsKICAKICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfZ2xvYmFsX3F1ZXVlKERJU1BBVENIX1FVRVVFX1BSSU9SSVRZX0RFRkFVTFQsIDApLCBeewogICAgW3NlbGYuY2xpZW50IHNodXRkb3duXTsKICAgIHNlbGYuY2xpZW50ID0gbmlsOwogIH0pOwp9CgojIHByYWdtYSBtYXJrIFR3aWxpbyBDbGllbnQKCi0gKHZvaWQpY29ubmVjdENsaWVudFdpdGhDb21wbGV0aW9uOihTdGF0dXNXaXRoRXJyb3JIYW5kbGVyKWNvbXBsZXRpb24gewogIGlmIChzZWxmLmNsaWVudCkgewogICAgW3NlbGYgbG9nb3V0XTsKICB9CiAgCiAgW3NlbGYgcmVxdWVzdFRva2VuV2l0aENvbXBsZXRpb246XihCT09MIHN1Y2NlZWRlZCwgTlNTdHJpbmcgKnRva2VuKSB7CiAgICBpZiAoc3VjY2VlZGVkKSB7CiAgICAgIFtzZWxmIGluaXRpYWxpemVDbGllbnRXaXRoVG9rZW46IHRva2VuXTsKICAgICAgW3NlbGYgbG9hZEdlbmVyYWxDaGF0Um9vbVdpdGhDb21wbGV0aW9uOmNvbXBsZXRpb25dOwogICAgfQogICAgZWxzZSB7CiAgICAgIE5TRXJyb3IgKmVycm9yID0gW3NlbGYgZXJyb3JXaXRoRGVzY3JpcHRpb246QCJDb3VsZCBub3QgZ2V0IGFjY2VzcyB0b2tlbiIgY29kZTozMDFdOwogICAgICBpZiAoY29tcGxldGlvbikgY29tcGxldGlvbihzdWNjZWVkZWQsIGVycm9yKTsKICAgIH0KICB9XTsKfQoKLSAodm9pZClpbml0aWFsaXplQ2xpZW50V2l0aFRva2VuOihOU1N0cmluZyAqKXRva2VuIHsKICBUd2lsaW9BY2Nlc3NNYW5hZ2VyICphY2Nlc3NNYW5hZ2VyID0gW1R3aWxpb0FjY2Vzc01hbmFnZXIgYWNjZXNzTWFuYWdlcldpdGhUb2tlbjp0b2tlbiBkZWxlZ2F0ZTogc2VsZl07CiAgc2VsZi5jbGllbnQgPSBbVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQgaXBNZXNzYWdpbmdDbGllbnRXaXRoQWNjZXNzTWFuYWdlcjphY2Nlc3NNYW5hZ2VyIGRlbGVnYXRlOm5pbF07Cn0KCi0gKHZvaWQpbG9hZEdlbmVyYWxDaGF0Um9vbVdpdGhDb21wbGV0aW9uOihTdGF0dXNXaXRoRXJyb3JIYW5kbGVyKWNvbXBsZXRpb24gewogIFtbQ2hhbm5lbE1hbmFnZXIgc2hhcmVkTWFuYWdlcl0gam9pbkdlbmVyYWxDaGF0Um9vbVdpdGhDb21wbGV0aW9uOl4oQk9PTCBzdWNjZWVkZWQpIHsKICAgIGlmIChzdWNjZWVkZWQpCiAgICB7CiAgICAgIHNlbGYuY29ubmVjdGVkID0gWUVTOwogICAgICBpZiAoY29tcGxldGlvbikgY29tcGxldGlvbihzdWNjZWVkZWQsIG5pbCk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgTlNFcnJvciAqZXJyb3IgPSBbc2VsZiBlcnJvcldpdGhEZXNjcmlwdGlvbjpAIkNvdWxkIG5vdCBqb2luIEdlbmVyYWwgY2hhbm5lbCIgY29kZTozMDBdOwogICAgICBpZiAoY29tcGxldGlvbikgY29tcGxldGlvbihzdWNjZWVkZWQsIGVycm9yKTsKICAgIH0KICB9XTsKfQoKLSAodm9pZClyZXF1ZXN0VG9rZW5XaXRoQ29tcGxldGlvbjooU3RhdHVzV2l0aFRva2VuSGFuZGxlciljb21wbGV0aW9uIHsKICBOU1N0cmluZyAqdXVpZCA9IFtbVUlEZXZpY2UgY3VycmVudERldmljZV0gaWRlbnRpZmllckZvclZlbmRvcl0uVVVJRFN0cmluZzsKICBOU0RpY3Rpb25hcnkgKnBhcmFtZXRlcnMgPSBAe0AiZGV2aWNlIjogdXVpZH07CiAgCiAgW1BGQ2xvdWQgY2FsbEZ1bmN0aW9uSW5CYWNrZ3JvdW5kOlRXQ1Rva2VuS2V5IHdpdGhQYXJhbWV0ZXJzOnBhcmFtZXRlcnMKICAgIGJsb2NrOl4oTlNEaWN0aW9uYXJ5ICpyZXN1bHRzLCBOU0Vycm9yICplcnJvcikgewogICAgICBOU1N0cmluZyAqdG9rZW4gPSBbcmVzdWx0cyBvYmplY3RGb3JLZXk6VFdDVG9rZW5LZXldOwogICAgICBCT09MIGVycm9yQ29uZGl0aW9uID0gZXJyb3IgfHwgIXRva2VuOwogICAgICAKICAgICAgaWYgKGNvbXBsZXRpb24pIGNvbXBsZXRpb24oIWVycm9yQ29uZGl0aW9uLCB0b2tlbik7CiAgICB9XTsKfQoKLSAoTlNFcnJvciAqKWVycm9yV2l0aERlc2NyaXB0aW9uOihOU1N0cmluZyAqKWRlc2NyaXB0aW9uIGNvZGU6KE5TSW50ZWdlciljb2RlIHsKICBOU0RpY3Rpb25hcnkgKnVzZXJJbmZvID0gQHtOU0xvY2FsaXplZERlc2NyaXB0aW9uS2V5OiBkZXNjcmlwdGlvbn07CiAgTlNFcnJvciAqZXJyb3IgPSBbTlNFcnJvciBlcnJvcldpdGhEb21haW46QCJhcHAiIGNvZGU6Y29kZSB1c2VySW5mbzp1c2VySW5mb107CiAgcmV0dXJuIGVycm9yOwp9CgojIHByYWdtYSBtYXJrIFR3aWxpb0FjY2Vzc01hbmFnZXJEZWxlZ2F0ZQoKLSAodm9pZClhY2Nlc3NNYW5hZ2VyVG9rZW5FeHBpcmVkOihUd2lsaW9BY2Nlc3NNYW5hZ2VyICopYWNjZXNzTWFuYWdlciB7CiAgW3NlbGYgcmVxdWVzdFRva2VuV2l0aENvbXBsZXRpb246XihCT09MIHN1Y2NlZWRlZCwgTlNTdHJpbmcgKnRva2VuKSB7CiAgICBpZiAoc3VjY2VlZGVkKSB7CiAgICAgIFthY2Nlc3NNYW5hZ2VyIHVwZGF0ZVRva2VuOnRva2VuXTsKICAgIH0KICAgIGVsc2UgewogICAgICBOU0xvZyhAIkVycm9yIHdoaWxlIHRyeWluZyB0byBnZXQgbmV3IGFjY2VzcyB0b2tlbiIpOwogICAgfQogIH1dOwp9CgotICh2b2lkKWFjY2Vzc01hbmFnZXI6KFR3aWxpb0FjY2Vzc01hbmFnZXIgKilhY2Nlc3NNYW5hZ2VyIGVycm9yOihOU0Vycm9yICopZXJyb3IgewogIE5TTG9nKEAiQWNjZXNzIG1hbmFnZXIgZXJyb3I6ICVAIiwgW2Vycm9yIGxvY2FsaXplZERlc2NyaXB0aW9uXSk7Cn0KCiNwcmFnbWEgbWFyayBJbnRlcm5hbCBoZWxwZXJzCgotIChOU1N0cmluZyAqKXVzZXJJZGVudGl0eSB7CiAgcmV0dXJuIFtbUEZVc2VyIGN1cnJlbnRVc2VyXSB1c2VybmFtZV07Cn0KCkBlbmQK</textarea>
<textarea class="saurus-file" data-file="twiliochat/ChannelManager.m" data-mode="objectivec">I2ltcG9ydCAiQ2hhbm5lbE1hbmFnZXIuaCIKI2ltcG9ydCAiSVBNZXNzYWdpbmdNYW5hZ2VyLmgiCgpAaW50ZXJmYWNlIENoYW5uZWxNYW5hZ2VyICgpCkBwcm9wZXJ0eSAoc3Ryb25nLCBub25hdG9taWMpIFRXTUNoYW5uZWwgKmdlbmVyYWxDaGFubmVsOwpAZW5kCgpzdGF0aWMgTlNTdHJpbmcgKiBjb25zdCBUV0NEZWZhdWx0Q2hhbm5lbFVuaXF1ZU5hbWUgPSBAImdlbmVyYWwiOwpzdGF0aWMgTlNTdHJpbmcgKiBjb25zdCBUV0NEZWZhdWx0Q2hhbm5lbE5hbWUgPSBAIkdlbmVyYWwgQ2hhbm5lbCI7CgpzdGF0aWMgTlNTdHJpbmcgKiBjb25zdCBUV0NGcmllbmRseU5hbWVLZXkgPSBAImZyaWVuZGx5TmFtZSI7CgpAaW1wbGVtZW50YXRpb24gQ2hhbm5lbE1hbmFnZXIKCisgKGluc3RhbmNldHlwZSlzaGFyZWRNYW5hZ2VyIHsKICBzdGF0aWMgQ2hhbm5lbE1hbmFnZXIgKnNoYXJlZE15TWFuYWdlciA9IG5pbDsKICBzdGF0aWMgZGlzcGF0Y2hfb25jZV90IG9uY2VUb2tlbjsKICBkaXNwYXRjaF9vbmNlKCZvbmNlVG9rZW4sIF57CiAgICBzaGFyZWRNeU1hbmFnZXIgPSBbW3NlbGYgYWxsb2NdIGluaXRdOwogIH0pOwogIHJldHVybiBzaGFyZWRNeU1hbmFnZXI7Cn0KCi0gKGluc3RhbmNldHlwZSlpbml0IHsKCiAgc2VsZi5jaGFubmVscyA9IFtbTlNNdXRhYmxlT3JkZXJlZFNldCBhbGxvY10gaW5pdF07CiAgW0lQTWVzc2FnaW5nTWFuYWdlciBzaGFyZWRNYW5hZ2VyXS5jbGllbnQuZGVsZWdhdGUgPSBzZWxmOwogIHJldHVybiBzZWxmOwp9CgojcHJhZ21hIG1hcmsgR2VuZXJhbCBjaGFubmVsCgotICh2b2lkKWpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoQ29tcGxldGlvbjooU3VjY2VlZEhhbmRsZXIpY29tcGxldGlvbiB7CiAgW3NlbGYgcG9wdWxhdGVDaGFubmVsc1dpdGhDb21wbGV0aW9uOl4oQk9PTCBzdWNjZWVkZWQpIHsKICAgIHNlbGYuZ2VuZXJhbENoYW5uZWwgPSBbc2VsZi5jaGFubmVsc0xpc3QgY2hhbm5lbFdpdGhVbmlxdWVOYW1lOlRXQ0RlZmF1bHRDaGFubmVsVW5pcXVlTmFtZV07CiAgICBpZiAoc2VsZi5nZW5lcmFsQ2hhbm5lbCkgewogICAgICBbc2VsZiBqb2luR2VuZXJhbENoYXRSb29tV2l0aFVuaXF1ZU5hbWU6bmlsIGNvbXBsZXRpb246Y29tcGxldGlvbl07CiAgICB9CiAgICBlbHNlIHsKICAgICAgW3NlbGYgY3JlYXRlR2VuZXJhbENoYXRSb29tV2l0aENvbXBsZXRpb246XihCT09MIHN1Y2NlZWRlZCkgewogICAgICAgIGlmIChzdWNjZWVkZWQpIHsKICAgICAgICAgIFtzZWxmIGpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoVW5pcXVlTmFtZTpUV0NEZWZhdWx0Q2hhbm5lbFVuaXF1ZU5hbWUgY29tcGxldGlvbjpjb21wbGV0aW9uXTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGNvbXBsZXRpb24pIGNvbXBsZXRpb24oTk8pOwogICAgICB9XTsKICAgIH0KICB9XTsKfQoKLSAodm9pZClqb2luR2VuZXJhbENoYXRSb29tV2l0aFVuaXF1ZU5hbWU6KE5TU3RyaW5nICopdW5pcXVlTmFtZSBjb21wbGV0aW9uOihTdWNjZWVkSGFuZGxlciljb21wbGV0aW9uIHsKICBbc2VsZi5nZW5lcmFsQ2hhbm5lbCBqb2luV2l0aENvbXBsZXRpb246XihUV01SZXN1bHQgcmVzdWx0KSB7CiAgICBpZiAocmVzdWx0ID09IFRXTVJlc3VsdFN1Y2Nlc3MpIHsKICAgICAgaWYgKHVuaXF1ZU5hbWUpIHsKICAgICAgICBbc2VsZiBzZXRHZW5lcmFsQ2hhdFJvb21VbmlxdWVOYW1lV2l0aENvbXBsZXRpb246Y29tcGxldGlvbl07CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgICBpZiAoY29tcGxldGlvbikgY29tcGxldGlvbihyZXN1bHQgPT0gVFdNUmVzdWx0U3VjY2Vzcyk7CiAgfV07Cn0KCi0gKHZvaWQpY3JlYXRlR2VuZXJhbENoYXRSb29tV2l0aENvbXBsZXRpb246KFN1Y2NlZWRIYW5kbGVyKWNvbXBsZXRpb24gewogIFtzZWxmLmNoYW5uZWxzTGlzdCBjcmVhdGVDaGFubmVsV2l0aEZyaWVuZGx5TmFtZTpUV0NEZWZhdWx0Q2hhbm5lbE5hbWUgdHlwZTpUV01DaGFubmVsVHlwZVB1YmxpYwogICAgY29tcGxldGlvbjpeKFRXTVJlc3VsdCByZXN1bHQsIFRXTUNoYW5uZWwgKmNoYW5uZWwpIHsKICAgICAgaWYgKHJlc3VsdCA9PSBUV01SZXN1bHRTdWNjZXNzKSB7CiAgICAgICAgc2VsZi5nZW5lcmFsQ2hhbm5lbCA9IGNoYW5uZWw7CiAgICAgIH0KICAgICAgaWYgKGNvbXBsZXRpb24pIGNvbXBsZXRpb24ocmVzdWx0ID09IFRXTVJlc3VsdFN1Y2Nlc3MpOwogICAgfV07Cn0KCi0gKHZvaWQpc2V0R2VuZXJhbENoYXRSb29tVW5pcXVlTmFtZVdpdGhDb21wbGV0aW9uOihTdWNjZWVkSGFuZGxlciljb21wbGV0aW9uIHsKICBbc2VsZi5nZW5lcmFsQ2hhbm5lbCBzZXRVbmlxdWVOYW1lOlRXQ0RlZmF1bHRDaGFubmVsVW5pcXVlTmFtZSBjb21wbGV0aW9uOl4oVFdNUmVzdWx0IHJlc3VsdCkgewogICAgaWYgKGNvbXBsZXRpb24pIGNvbXBsZXRpb24ocmVzdWx0ID09IFRXTVJlc3VsdFN1Y2Nlc3MpOwogIH1dOwp9CgojcHJhZ21hIG1hcmsgUG9wdWxhdGUgY2hhbm5lbHMKCi0gKHZvaWQpcG9wdWxhdGVDaGFubmVsc1dpdGhDb21wbGV0aW9uOihTdWNjZWVkSGFuZGxlciljb21wbGV0aW9uIHsKICBzZWxmLmNoYW5uZWxzID0gbmlsOwoKICBbc2VsZiBsb2FkQ2hhbm5lbExpc3RXaXRoQ29tcGxldGlvbjpeKEJPT0wgc3VjY2VlZGVkLCBUV01DaGFubmVscyAqY2hhbm5lbHNMaXN0KSB7CiAgICBpZiAoIXN1Y2NlZWRlZCkgewogICAgICBzZWxmLmNoYW5uZWxzTGlzdCA9IG5pbDsKICAgICAgc2VsZi5jaGFubmVscyA9IG5pbDsKICAgICAgaWYgKGNvbXBsZXRpb24pIGNvbXBsZXRpb24oc3VjY2VlZGVkKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X2dsb2JhbF9xdWV1ZShESVNQQVRDSF9RVUVVRV9QUklPUklUWV9ERUZBVUxULCAwKSwgXnsKICAgICAgW3NlbGYuY2hhbm5lbHNMaXN0IGxvYWRDaGFubmVsc1dpdGhDb21wbGV0aW9uOl4oVFdNUmVzdWx0IHJlc3VsdCkgewogICAgICAgIGlmIChyZXN1bHQgPT0gVFdNUmVzdWx0U3VjY2VzcykgewogICAgICAgICAgc2VsZi5jaGFubmVscyA9IFtbTlNNdXRhYmxlT3JkZXJlZFNldCBhbGxvY10gaW5pdF07CiAgICAgICAgICBbc2VsZi5jaGFubmVscyBhZGRPYmplY3RzRnJvbUFycmF5OltzZWxmLmNoYW5uZWxzTGlzdCBhbGxPYmplY3RzXV07CiAgICAgICAgICBbc2VsZiBzb3J0Q2hhbm5lbHNdOwogICAgICAgIH0KICAgICAgICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfbWFpbl9xdWV1ZSgpLCBeewogICAgICAgICAgaWYgKGNvbXBsZXRpb24pIGNvbXBsZXRpb24oc3VjY2VlZGVkKTsKICAgICAgICB9KTsKICAgICAgfV07CiAgICB9KTsKICB9XTsKfQoKLSAodm9pZClsb2FkQ2hhbm5lbExpc3RXaXRoQ29tcGxldGlvbjooQ2hhbm5lbHNMaXN0SGFuZGxlciljb21wbGV0aW9uIHsKICBzZWxmLmNoYW5uZWxzTGlzdCA9IG5pbDsKCiAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X2dsb2JhbF9xdWV1ZShESVNQQVRDSF9RVUVVRV9QUklPUklUWV9ERUZBVUxULCAwKSwgXnsKICAgIFtbSVBNZXNzYWdpbmdNYW5hZ2VyIHNoYXJlZE1hbmFnZXJdLmNsaWVudCBjaGFubmVsc0xpc3RXaXRoQ29tcGxldGlvbjpeKFRXTVJlc3VsdCByZXN1bHQsIFRXTUNoYW5uZWxzICpjaGFubmVsc0xpc3QpIHsKICAgICAgaWYgKHJlc3VsdCA9PSBUV01SZXN1bHRTdWNjZXNzKSB7CiAgICAgICAgc2VsZi5jaGFubmVsc0xpc3QgPSBjaGFubmVsc0xpc3Q7CiAgICAgIH0KICAgICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X21haW5fcXVldWUoKSwgXnsKICAgICAgICBpZiAoY29tcGxldGlvbikgY29tcGxldGlvbihyZXN1bHQgPT0gVFdNUmVzdWx0U3VjY2Vzcywgc2VsZi5jaGFubmVsc0xpc3QpOwogICAgICB9KTsKICAgIH1dOwogIH0pOwp9CgotICh2b2lkKXNvcnRDaGFubmVscyB7CiAgU0VMIHNvcnRTZWxlY3RvciA9IEBzZWxlY3Rvcihsb2NhbGl6ZWRDYXNlSW5zZW5zaXRpdmVDb21wYXJlOik7CiAgTlNTb3J0RGVzY3JpcHRvciAqZGVzY3JpcHRvciA9IFtbTlNTb3J0RGVzY3JpcHRvciBhbGxvY10gaW5pdFdpdGhLZXk6VFdDRnJpZW5kbHlOYW1lS2V5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc2NlbmRpbmc6WUVTCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6c29ydFNlbGVjdG9yXTsKICBbc2VsZi5jaGFubmVscyBzb3J0VXNpbmdEZXNjcmlwdG9yczpAW2Rlc2NyaXB0b3JdXTsKfQoKIyBwcmFnbWEgbWFyayBDcmVhdGUgY2hhbm5lbAoKLSAodm9pZCljcmVhdGVDaGFubmVsV2l0aE5hbWU6KE5TU3RyaW5nICopbmFtZSBjb21wbGV0aW9uOihDaGFubmVsSGFuZGxlciljb21wbGV0aW9uIHsKICBpZiAoW25hbWUgaXNFcXVhbFRvU3RyaW5nOlRXQ0RlZmF1bHRDaGFubmVsTmFtZV0pIHsKICAgIGlmIChjb21wbGV0aW9uKSBjb21wbGV0aW9uKE5PLCBuaWwpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKCFzZWxmLmNoYW5uZWxzTGlzdCkKICB7CiAgICBbc2VsZiBsb2FkQ2hhbm5lbExpc3RXaXRoQ29tcGxldGlvbjpeKEJPT0wgc3VjY2VlZGVkLCBUV01DaGFubmVscyAqY2hhbm5lbHNMaXN0KSB7CiAgICAgIGlmIChzdWNjZWVkZWQpIHsKICAgICAgICBbc2VsZiBjcmVhdGVDaGFubmVsV2l0aE5hbWU6bmFtZSBjb21wbGV0aW9uOmNvbXBsZXRpb25dOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGNvbXBsZXRpb24pIHsKICAgICAgICBjb21wbGV0aW9uKHN1Y2NlZWRlZCwgbmlsKTsKICAgICAgfQogICAgfV07CiAgICByZXR1cm47CiAgfQoKICBbc2VsZi5jaGFubmVsc0xpc3QKICAgIGNyZWF0ZUNoYW5uZWxXaXRoRnJpZW5kbHlOYW1lOm5hbWUKICAgIHR5cGU6VFdNQ2hhbm5lbFR5cGVQdWJsaWMKICAgIGNvbXBsZXRpb246XihUV01SZXN1bHQgcmVzdWx0LCBUV01DaGFubmVsICpjaGFubmVsKSB7CiAgICAgIGlmIChjb21wbGV0aW9uKSBjb21wbGV0aW9uKHJlc3VsdCA9PSBUV01SZXN1bHRTdWNjZXNzLCBjaGFubmVsKTsKICAgIH1dOwp9CgojIHByYWdtYSBtYXJrIFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50RGVsZWdhdGUKCi0gKHZvaWQpaXBNZXNzYWdpbmdDbGllbnQ6KFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ICopY2xpZW50IGNoYW5uZWxBZGRlZDooVFdNQ2hhbm5lbCAqKWNoYW5uZWwgewogIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIF57CiAgICBbc2VsZi5jaGFubmVscyBhZGRPYmplY3Q6Y2hhbm5lbF07CiAgICBbc2VsZiBzb3J0Q2hhbm5lbHNdOwogICAgW3NlbGYuZGVsZWdhdGUgaXBNZXNzYWdpbmdDbGllbnQ6Y2xpZW50IGNoYW5uZWxBZGRlZDpjaGFubmVsXTsKICB9KTsKfQoKLSAodm9pZClpcE1lc3NhZ2luZ0NsaWVudDooVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQgKiljbGllbnQgY2hhbm5lbENoYW5nZWQ6KFRXTUNoYW5uZWwgKiljaGFubmVsIHsKICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfbWFpbl9xdWV1ZSgpLCBeewogICAgW3NlbGYuZGVsZWdhdGUgaXBNZXNzYWdpbmdDbGllbnQ6Y2xpZW50IGNoYW5uZWxDaGFuZ2VkOmNoYW5uZWxdOwogIH0pOwp9CgotICh2b2lkKWlwTWVzc2FnaW5nQ2xpZW50OihUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudCAqKWNsaWVudCBjaGFubmVsRGVsZXRlZDooVFdNQ2hhbm5lbCAqKWNoYW5uZWwgewogIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIF57CiAgICBbW0NoYW5uZWxNYW5hZ2VyIHNoYXJlZE1hbmFnZXJdLmNoYW5uZWxzIHJlbW92ZU9iamVjdDpjaGFubmVsXTsKICAgIFtzZWxmLmRlbGVnYXRlIGlwTWVzc2FnaW5nQ2xpZW50OmNsaWVudCBjaGFubmVsRGVsZXRlZDpjaGFubmVsXTsKICB9KTsKfQoKQGVuZAo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/MainChatViewController.m" data-mode="objectivec">I2ltcG9ydCA8UGFyc2UvUGFyc2UuaD4KI2ltcG9ydCA8VHdpbGlvSVBNZXNzYWdpbmdDbGllbnQvVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQuaD4KI2ltcG9ydCAiTWFpbkNoYXRWaWV3Q29udHJvbGxlci5oIgojaW1wb3J0ICJDaGF0VGFibGVDZWxsLmgiCiNpbXBvcnQgIk5TRGF0ZStJU084NjAxUGFyc2VyLmgiCiNpbXBvcnQgIlNXUmV2ZWFsVmlld0NvbnRyb2xsZXIuaCIKI2ltcG9ydCAiQ2hhbm5lbE1hbmFnZXIuaCIKI2ltcG9ydCAiU3RhdHVzRW50cnkuaCIKI2ltcG9ydCAiRGF0ZVRvZGF5Rm9ybWF0dGVyLmgiCiNpbXBvcnQgIk1lbnVWaWV3Q29udHJvbGxlci5oIgoKQGludGVyZmFjZSBNYWluQ2hhdFZpZXdDb250cm9sbGVyICgpCkBwcm9wZXJ0eSAod2Vhaywgbm9uYXRvbWljKSBJQk91dGxldCBVSUJhckJ1dHRvbkl0ZW0gKnJldmVhbEJ1dHRvbkl0ZW07CkBwcm9wZXJ0eSAod2Vhaywgbm9uYXRvbWljKSBJQk91dGxldCBVSUJhckJ1dHRvbkl0ZW0gKmFjdGlvbkJ1dHRvbkl0ZW07CgpAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBOU011dGFibGVPcmRlcmVkU2V0ICptZXNzYWdlczsKCkBlbmQKCnN0YXRpYyBOU1N0cmluZyAqIGNvbnN0IFRXQ0NoYXRDZWxsSWRlbnRpZmllciA9IEAiQ2hhdFRhYmxlQ2VsbCI7CnN0YXRpYyBOU1N0cmluZyAqIGNvbnN0IFRXQ0NoYXRTdGF0dXNDZWxsSWRlbnRpZmllciA9IEAiQ2hhdFN0YXR1c1RhYmxlQ2VsbCI7CgpzdGF0aWMgTlNTdHJpbmcgKiBjb25zdCBUV0NPcGVuR2VuZXJhbENoYW5uZWxTZWd1ZSA9IEAiT3BlbkdlbmVyYWxDaGF0IjsKc3RhdGljIE5TSW50ZWdlciBjb25zdCBUV0NMYWJlbFRhZyA9IDIwMDsKCkBpbXBsZW1lbnRhdGlvbiBNYWluQ2hhdFZpZXdDb250cm9sbGVyCgojcHJhZ21hIG1hcmsgSW5pdGlhbGl6YXRpb24KCi0gKHZvaWQpdmlld0RpZExvYWQgewogIFtzdXBlciB2aWV3RGlkTG9hZF07CiAgCiAgaWYgKHNlbGYucmV2ZWFsVmlld0NvbnRyb2xsZXIpCiAgewogICAgW3NlbGYucmV2ZWFsQnV0dG9uSXRlbSBzZXRUYXJnZXQ6IHNlbGYucmV2ZWFsVmlld0NvbnRyb2xsZXJdOwogICAgW3NlbGYucmV2ZWFsQnV0dG9uSXRlbSBzZXRBY3Rpb246IEBzZWxlY3RvciggcmV2ZWFsVG9nZ2xlOiApXTsKICAgIFtzZWxmLm5hdmlnYXRpb25Db250cm9sbGVyLm5hdmlnYXRpb25CYXIgYWRkR2VzdHVyZVJlY29nbml6ZXI6IHNlbGYucmV2ZWFsVmlld0NvbnRyb2xsZXIucGFuR2VzdHVyZVJlY29nbml6ZXJdOwogICAgc2VsZi5yZXZlYWxWaWV3Q29udHJvbGxlci5yZWFyVmlld1JldmVhbE92ZXJkcmF3ID0gMC5mOwogIH0KICAKICBzZWxmLmJvdW5jZXMgPSBZRVM7CiAgc2VsZi5zaGFrZVRvQ2xlYXJFbmFibGVkID0gWUVTOwogIHNlbGYua2V5Ym9hcmRQYW5uaW5nRW5hYmxlZCA9IFlFUzsKICBzZWxmLnNob3VsZFNjcm9sbFRvQm90dG9tQWZ0ZXJLZXlib2FyZFNob3dzID0gTk87CiAgc2VsZi5pbnZlcnRlZCA9IFlFUzsKICAKICBVSU5pYiAqY2VsbE5pYiA9IFtVSU5pYiBuaWJXaXRoTmliTmFtZTpUV0NDaGF0Q2VsbElkZW50aWZpZXIgYnVuZGxlOm5pbF07CiAgW3NlbGYudGFibGVWaWV3IHJlZ2lzdGVyTmliOmNlbGxOaWIKICAgICAgIGZvckNlbGxSZXVzZUlkZW50aWZpZXI6VFdDQ2hhdENlbGxJZGVudGlmaWVyXTsKICAKICBVSU5pYiAqY2VsbFN0YXR1c05pYiA9IFtVSU5pYiBuaWJXaXRoTmliTmFtZTpUV0NDaGF0U3RhdHVzQ2VsbElkZW50aWZpZXIgYnVuZGxlOm5pbF07CiAgW3NlbGYudGFibGVWaWV3IHJlZ2lzdGVyTmliOmNlbGxTdGF0dXNOaWIKICAgICAgIGZvckNlbGxSZXVzZUlkZW50aWZpZXI6VFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyXTsKICAKICBzZWxmLnRleHRJbnB1dGJhci5hdXRvSGlkZVJpZ2h0QnV0dG9uID0gWUVTOwogIHNlbGYudGV4dElucHV0YmFyLm1heENoYXJDb3VudCA9IDI1NjsKICBzZWxmLnRleHRJbnB1dGJhci5jb3VudGVyU3R5bGUgPSBTTEtDb3VudGVyU3R5bGVTcGxpdDsKICBzZWxmLnRleHRJbnB1dGJhci5jb3VudGVyUG9zaXRpb24gPSBTTEtDb3VudGVyUG9zaXRpb25Ub3A7CiAgCiAgVUlGb250ICpmb250ID0gW1VJRm9udCBmb250V2l0aE5hbWU6QCJBdmVuaXItTGlnaHQiIHNpemU6MTRdOwogIHNlbGYudGV4dFZpZXcuZm9udCA9IGZvbnQ7CiAgCiAgW3NlbGYucmlnaHRCdXR0b24gc2V0VGl0bGVDb2xvcjpbVUlDb2xvciBjb2xvcldpdGhSZWQ6MC45NzMgZ3JlZW46MC41NTcgYmx1ZTowLjUwMiBhbHBoYToxXQogICAgICAgICAgICAgICAgICAgICAgICAgZm9yU3RhdGU6VUlDb250cm9sU3RhdGVOb3JtYWxdOwogIAogIGZvbnQgPSBbVUlGb250IGZvbnRXaXRoTmFtZTpAIkF2ZW5pci1IZWF2eSIgc2l6ZToxN107CiAgc2VsZi5uYXZpZ2F0aW9uQ29udHJvbGxlci5uYXZpZ2F0aW9uQmFyLnRpdGxlVGV4dEF0dHJpYnV0ZXMgPSBAe05TRm9udEF0dHJpYnV0ZU5hbWU6Zm9udH07CgogIHNlbGYudGFibGVWaWV3LmFsbG93c1NlbGVjdGlvbiA9IE5POwogIHNlbGYudGFibGVWaWV3LmVzdGltYXRlZFJvd0hlaWdodCA9IDcwOwogIHNlbGYudGFibGVWaWV3LnJvd0hlaWdodCA9IFVJVGFibGVWaWV3QXV0b21hdGljRGltZW5zaW9uOwogIHNlbGYudGFibGVWaWV3LnNlcGFyYXRvclN0eWxlID0gVUlUYWJsZVZpZXdDZWxsU2VwYXJhdG9yU3R5bGVOb25lOwogIAogIGlmICghc2VsZi5jaGFubmVsKSB7CiAgICBzZWxmLmNoYW5uZWwgPSBbQ2hhbm5lbE1hbmFnZXIgc2hhcmVkTWFuYWdlcl0uZ2VuZXJhbENoYW5uZWw7CiAgfQp9CgotICh2b2lkKXZpZXdEaWRBcHBlYXI6KEJPT0wpYW5pbWF0ZWQgewogIFtzdXBlciB2aWV3RGlkQXBwZWFyOmFuaW1hdGVkXTsKICBbc2VsZiBzY3JvbGxUb0JvdHRvbU1lc3NhZ2VdOwp9CgotIChOU011dGFibGVPcmRlcmVkU2V0ICopbWVzc2FnZXMgewogIGlmICghX21lc3NhZ2VzKSB7CiAgICBfbWVzc2FnZXMgPSBbW05TTXV0YWJsZU9yZGVyZWRTZXQgYWxsb2NdIGluaXRdOwogIH0KICByZXR1cm4gX21lc3NhZ2VzOwp9CgotICh2b2lkKXNldENoYW5uZWw6KFRXTUNoYW5uZWwgKiljaGFubmVsIHsKICBfY2hhbm5lbCA9IGNoYW5uZWw7CiAgc2VsZi50aXRsZSA9IHNlbGYuY2hhbm5lbC5mcmllbmRseU5hbWU7CiAgc2VsZi5jaGFubmVsLmRlbGVnYXRlID0gc2VsZjsKICAKICBpZiAoc2VsZi5jaGFubmVsID09IFtDaGFubmVsTWFuYWdlciBzaGFyZWRNYW5hZ2VyXS5nZW5lcmFsQ2hhbm5lbCkgewogICAgc2VsZi5uYXZpZ2F0aW9uSXRlbS5yaWdodEJhckJ1dHRvbkl0ZW0gPSBuaWw7CiAgfQogIAogIGlmIChzZWxmLmNoYW5uZWwuc3RhdHVzID09IFRXTUNoYW5uZWxTdGF0dXNKb2luZWQpCiAgewogICAgW3NlbGYgbG9hZE1lc3NhZ2VzXTsKICAgIHNlbGYuY2hhbm5lbC5kZWxlZ2F0ZSA9IHNlbGY7CiAgfQogIGVsc2UgewogICAgW1VJQXBwbGljYXRpb24gc2hhcmVkQXBwbGljYXRpb25dLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUgPSBZRVM7CiAgICBzZWxmLnRleHRJbnB1dGJhckhpZGRlbiA9IFlFUzsKICAgIFtzZWxmLmNoYW5uZWwgam9pbldpdGhDb21wbGV0aW9uOl4oVFdNUmVzdWx0IHJlc3VsdCkgewogICAgICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfbWFpbl9xdWV1ZSgpLCBeewogICAgICAgIFtVSUFwcGxpY2F0aW9uIHNoYXJlZEFwcGxpY2F0aW9uXS5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlID0gTk87CiAgICAgICAgW3NlbGYgc2V0VGV4dElucHV0YmFySGlkZGVuOk5PIGFuaW1hdGVkOllFU107CiAgICAgIH0pOwogICAgfV07CiAgfQp9CgotIChOU0ludGVnZXIpbnVtYmVyT2ZTZWN0aW9uc0luVGFibGVWaWV3OihVSVRhYmxlVmlldyAqKXRhYmxlVmlldyB7CiAgcmV0dXJuIDE7Cn0KCi0gKE5TSW50ZWdlcil0YWJsZVZpZXc6KFVJVGFibGVWaWV3ICopdGFibGVWaWV3IG51bWJlck9mUm93c0luU2VjdGlvbjooTlNJbnRlZ2VyKXNlY3Rpb24gewogIHJldHVybiBzZWxmLm1lc3NhZ2VzLmNvdW50Owp9CgotIChVSVRhYmxlVmlld0NlbGwgKil0YWJsZVZpZXc6KFVJVGFibGVWaWV3ICopdGFibGVWaWV3IGNlbGxGb3JSb3dBdEluZGV4UGF0aDooTlNJbmRleFBhdGggKilpbmRleFBhdGggewogIFVJVGFibGVWaWV3Q2VsbCAqY2VsbCA9IG5pbDsKICAKICBpZCBtZXNzYWdlID0gW3NlbGYubWVzc2FnZXMgb2JqZWN0QXRJbmRleDppbmRleFBhdGgucm93XTsKICAKICBpZiAoW21lc3NhZ2UgaXNLaW5kT2ZDbGFzczpbVFdNTWVzc2FnZSBjbGFzc11dKSB7CiAgICBjZWxsID0gW3NlbGYgZ2V0Q2hhdENlbGxGb3JUYWJsZVZpZXc6dGFibGVWaWV3IGZvckluZGV4UGF0aDppbmRleFBhdGggbWVzc2FnZTptZXNzYWdlXTsKICB9CiAgZWxzZSB7CiAgICBjZWxsID0gW3NlbGYgZ2V0U3RhdHVDZWxsRm9yVGFibGVWaWV3OnRhYmxlVmlldyBmb3JJbmRleFBhdGg6aW5kZXhQYXRoIG1lc3NhZ2U6bWVzc2FnZV07CiAgfQogIAogIGNlbGwudHJhbnNmb3JtID0gdGFibGVWaWV3LnRyYW5zZm9ybTsKICByZXR1cm4gY2VsbDsKfQoKLSAoQ2hhdFRhYmxlQ2VsbCAqKWdldENoYXRDZWxsRm9yVGFibGVWaWV3OihVSVRhYmxlVmlldyAqKXRhYmxlVmlldwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JJbmRleFBhdGg6KE5TSW5kZXhQYXRoICopaW5kZXhQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTooVFdNTWVzc2FnZSAqKW1lc3NhZ2UgewogIFVJVGFibGVWaWV3Q2VsbCAqY2VsbCA9IFtzZWxmLnRhYmxlVmlldwogICAgZGVxdWV1ZVJldXNhYmxlQ2VsbFdpdGhJZGVudGlmaWVyOlRXQ0NoYXRDZWxsSWRlbnRpZmllciBmb3JJbmRleFBhdGg6aW5kZXhQYXRoXTsKCiAgQ2hhdFRhYmxlQ2VsbCAqY2hhdENlbGwgPSAoQ2hhdFRhYmxlQ2VsbCAqKWNlbGw7CiAgY2hhdENlbGwudXNlciA9IG1lc3NhZ2UuYXV0aG9yOwogIGNoYXRDZWxsLmRhdGUgPSBbW1tEYXRlVG9kYXlGb3JtYXR0ZXIgYWxsb2NdIGluaXRdCiAgICBzdHJpbmdGcm9tRGF0ZTpbTlNEYXRlIGRhdGVXaXRoSVNPODYwMVN0cmluZzptZXNzYWdlLnRpbWVzdGFtcF1dOwoKICBjaGF0Q2VsbC5tZXNzYWdlID0gbWVzc2FnZS5ib2R5OwogIAogIHJldHVybiBjaGF0Q2VsbDsKfQoKLSAoVUlUYWJsZVZpZXdDZWxsICopZ2V0U3RhdHVDZWxsRm9yVGFibGVWaWV3OihVSVRhYmxlVmlldyAqKXRhYmxlVmlldwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JJbmRleFBhdGg6KE5TSW5kZXhQYXRoICopaW5kZXhQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTooU3RhdHVzRW50cnkgKiltZXNzYWdlIHsKICBVSVRhYmxlVmlld0NlbGwgKmNlbGwgPSBbc2VsZi50YWJsZVZpZXcKICAgIGRlcXVldWVSZXVzYWJsZUNlbGxXaXRoSWRlbnRpZmllcjpUV0NDaGF0U3RhdHVzQ2VsbElkZW50aWZpZXIgZm9ySW5kZXhQYXRoOmluZGV4UGF0aF07CiAgCiAgVUlMYWJlbCAqbGFiZWwgPSBbY2VsbCB2aWV3V2l0aFRhZzpUV0NMYWJlbFRhZ107CiAgbGFiZWwudGV4dCA9IFtOU1N0cmluZyBzdHJpbmdXaXRoRm9ybWF0OkAiVXNlciAlQCBoYXMgJUAiLAogICAgIG1lc3NhZ2UubWVtYmVyLmlkZW50aXR5LCAobWVzc2FnZS5zdGF0dXMgPT0gVFdDTWVtYmVyU3RhdHVzSm9pbmVkKSA/IEAiam9pbmVkIiA6IEAibGVmdCJdOwogIAogIHJldHVybiBjZWxsOwp9CgotICh2b2lkKWRpZFByZXNzUmlnaHRCdXR0b246KGlkKXNlbmRlciB7CiAgW3NlbGYudGV4dFZpZXcgcmVmcmVzaEZpcnN0UmVzcG9uZGVyXTsKICBbc2VsZiBzZW5kTWVzc2FnZTogW3NlbGYudGV4dFZpZXcudGV4dCBjb3B5XV07CiAgW3N1cGVyIGRpZFByZXNzUmlnaHRCdXR0b246c2VuZGVyXTsKfQoKI3ByYWdtYSBtYXJrIENoYXQgU2VydmljZQotICh2b2lkKXNlbmRNZXNzYWdlOiAoTlNTdHJpbmcgKilpbnB1dE1lc3NhZ2UgewogIFRXTU1lc3NhZ2UgKm1lc3NhZ2UgPSBbc2VsZi5jaGFubmVsLm1lc3NhZ2VzIGNyZWF0ZU1lc3NhZ2VXaXRoQm9keTppbnB1dE1lc3NhZ2VdOwogIFtzZWxmLmNoYW5uZWwubWVzc2FnZXMgc2VuZE1lc3NhZ2U6bWVzc2FnZSBjb21wbGV0aW9uOm5pbF07Cn0KCgoKLSAodm9pZClhZGRNZXNzYWdlczooTlNBcnJheSAqKW1lc3NhZ2VzIHsKICBbc2VsZi5tZXNzYWdlcyBhZGRPYmplY3RzRnJvbUFycmF5Om1lc3NhZ2VzXTsKICBbc2VsZiBzb3J0TWVzc2FnZXNdOwogIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIF57CiAgICBbc2VsZi50YWJsZVZpZXcgcmVsb2FkRGF0YV07CiAgICBpZiAoc2VsZi5tZXNzYWdlcy5jb3VudCA+IDApIHsKICAgICAgW3NlbGYgc2Nyb2xsVG9Cb3R0b21NZXNzYWdlXTsKICAgIH0KICB9KTsKfQoKCi0gKHZvaWQpc29ydE1lc3NhZ2VzIHsKICBbc2VsZi5tZXNzYWdlcyBzb3J0VXNpbmdEZXNjcmlwdG9yczpAW1tbTlNTb3J0RGVzY3JpcHRvciBhbGxvY10KICAgIGluaXRXaXRoS2V5OkAidGltZXN0YW1wIiBhc2NlbmRpbmc6Tk9dXV07Cn0KCi0gKHZvaWQpc2Nyb2xsVG9Cb3R0b21NZXNzYWdlIHsKICBpZiAoc2VsZi5tZXNzYWdlcy5jb3VudCA9PSAwKSB7CiAgICByZXR1cm47CiAgfQogIAogIE5TSW5kZXhQYXRoICpib3R0b21NZXNzYWdlSW5kZXggPSBbTlNJbmRleFBhdGggaW5kZXhQYXRoRm9yUm93OjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluU2VjdGlvbjowXTsKICBbc2VsZi50YWJsZVZpZXcgc2Nyb2xsVG9Sb3dBdEluZGV4UGF0aDpib3R0b21NZXNzYWdlSW5kZXgKICAgIGF0U2Nyb2xsUG9zaXRpb246VUlUYWJsZVZpZXdTY3JvbGxQb3NpdGlvbkJvdHRvbSBhbmltYXRlZDpOT107Cn0KCi0gKHZvaWQpbG9hZE1lc3NhZ2VzIHsKICBbc2VsZi5tZXNzYWdlcyByZW1vdmVBbGxPYmplY3RzXTsKICBbc2VsZiBhZGRNZXNzYWdlczpzZWxmLmNoYW5uZWwubWVzc2FnZXMuYWxsT2JqZWN0c107Cn0KCi0gKHZvaWQpbGVhdmVDaGFubmVsIHsKICBbc2VsZi5jaGFubmVsIGxlYXZlV2l0aENvbXBsZXRpb246XihUV01SZXN1bHQgcmVzdWx0KSB7CiAgICBpZiAocmVzdWx0ID09IFRXTVJlc3VsdFN1Y2Nlc3MpIHsKICAgICAgWyhNZW51Vmlld0NvbnRyb2xsZXIgKilzZWxmLnJldmVhbFZpZXdDb250cm9sbGVyLnJlYXJWaWV3Q29udHJvbGxlciBkZXNlbGVjdFNlbGVjdGVkQ2hhbm5lbF07CiAgICAgIFtzZWxmLnJldmVhbFZpZXdDb250cm9sbGVyLnJlYXJWaWV3Q29udHJvbGxlcgogICAgICAgIHBlcmZvcm1TZWd1ZVdpdGhJZGVudGlmaWVyOlRXQ09wZW5HZW5lcmFsQ2hhbm5lbFNlZ3VlIHNlbmRlcjpuaWxdOwogICAgfQogIH1dOwp9CgojcHJhZ21hIG1hcmsgLSBUTU1lc3NhZ2VEZWxlZ2F0ZQoKLSAodm9pZClpcE1lc3NhZ2luZ0NsaWVudDooVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQgKiljbGllbnQKICAgICAgICAgICAgICAgICAgY2hhbm5lbDooVFdNQ2hhbm5lbCAqKWNoYW5uZWwKICAgICAgICAgICAgIG1lc3NhZ2VBZGRlZDooVFdNTWVzc2FnZSAqKW1lc3NhZ2UgewogIGlmICghW3NlbGYubWVzc2FnZXMgY29udGFpbnNPYmplY3Q6bWVzc2FnZV0pIHsKICAgIFtzZWxmIGFkZE1lc3NhZ2VzOkBbbWVzc2FnZV1dOwogIH0KfQoKLSAodm9pZClpcE1lc3NhZ2luZ0NsaWVudDooVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQgKiljbGllbnQKICAgICAgICAgICBjaGFubmVsRGVsZXRlZDooVFdNQ2hhbm5lbCAqKWNoYW5uZWwgewogIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIF57CiAgICBpZiAoY2hhbm5lbCA9PSBzZWxmLmNoYW5uZWwpIHsKICAgICAgW3NlbGYucmV2ZWFsVmlld0NvbnRyb2xsZXIucmVhclZpZXdDb250cm9sbGVyCiAgICAgICAgcGVyZm9ybVNlZ3VlV2l0aElkZW50aWZpZXI6VFdDT3BlbkdlbmVyYWxDaGFubmVsU2VndWUgc2VuZGVyOm5pbF07CiAgICB9CiAgfSk7Cn0KCi0gKHZvaWQpaXBNZXNzYWdpbmdDbGllbnQ6KFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ICopY2xpZW50CiAgICAgICAgICAgICAgICAgIGNoYW5uZWw6KFRXTUNoYW5uZWwgKiljaGFubmVsCiAgICAgICAgICAgICBtZW1iZXJKb2luZWQ6KFRXTU1lbWJlciAqKW1lbWJlciB7CiAgW3NlbGYgYWRkTWVzc2FnZXM6QFtbU3RhdHVzRW50cnkgc3RhdHVzRW50cnlXaXRoTWVtYmVyOm1lbWJlciBzdGF0dXM6VFdDTWVtYmVyU3RhdHVzSm9pbmVkXV1dOwp9CgotICh2b2lkKWlwTWVzc2FnaW5nQ2xpZW50OihUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudCAqKWNsaWVudAogICAgICAgICAgICAgICAgICBjaGFubmVsOihUV01DaGFubmVsICopY2hhbm5lbAogICAgICAgICAgICAgICBtZW1iZXJMZWZ0OihUV01NZW1iZXIgKiltZW1iZXIgewogIFtzZWxmIGFkZE1lc3NhZ2VzOkBbW1N0YXR1c0VudHJ5IHN0YXR1c0VudHJ5V2l0aE1lbWJlcjptZW1iZXIgc3RhdHVzOlRXQ01lbWJlclN0YXR1c0xlZnRdXV07Cn0KCi0gKHZvaWQpaXBNZXNzYWdpbmdDbGllbnQ6KFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ICopY2xpZW50CiAgICAgY2hhbm5lbEhpc3RvcnlMb2FkZWQ6KFRXTUNoYW5uZWwgKiljaGFubmVsIHsKICBbc2VsZiBsb2FkTWVzc2FnZXNdOwogIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIF57CiAgICBbc2VsZi50YWJsZVZpZXcgcmVsb2FkRGF0YV07CiAgfSk7Cn0KCgojcHJhZ21hIG1hcmsgLSBBY3Rpb25zCgotIChJQkFjdGlvbilhY3Rpb25CdXR0b25Ub3VjaGVkOihVSUJhckJ1dHRvbkl0ZW0gKilzZW5kZXIgewogIFtzZWxmIGxlYXZlQ2hhbm5lbF07Cn0KCi0gKElCQWN0aW9uKXJldmVhbEJ1dHRvblRvdWNoZWQ6KFVJQmFyQnV0dG9uSXRlbSAqKXNlbmRlciB7CiAgW3NlbGYucmV2ZWFsVmlld0NvbnRyb2xsZXIgcmV2ZWFsVG9nZ2xlQW5pbWF0ZWQ6WUVTXTsKfQoKQGVuZAo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/MenuViewController.m" data-mode="objectivec">I2ltcG9ydCA8UGFyc2UvUGFyc2UuaD4KI2ltcG9ydCA8U1dSZXZlYWxWaWV3Q29udHJvbGxlci9TV1JldmVhbFZpZXdDb250cm9sbGVyLmg+CiNpbXBvcnQgIk1lbnVWaWV3Q29udHJvbGxlci5oIgojaW1wb3J0ICJNZW51VGFibGVDZWxsLmgiCiNpbXBvcnQgIklucHV0RGlhbG9nQ29udHJvbGxlci5oIgojaW1wb3J0ICJNYWluQ2hhdFZpZXdDb250cm9sbGVyLmgiCiNpbXBvcnQgIklQTWVzc2FnaW5nTWFuYWdlci5oIgojaW1wb3J0ICJBbGVydERpYWxvZ0NvbnRyb2xsZXIuaCIKI2ltcG9ydCAiQ2hhbm5lbE1hbmFnZXIuaCIKCkBpbnRlcmZhY2UgTWVudVZpZXdDb250cm9sbGVyICgpCkBwcm9wZXJ0eSAod2Vhaywgbm9uYXRvbWljKSBJQk91dGxldCBVSUxhYmVsICp1c2VybmFtZUxhYmVsOwpAcHJvcGVydHkgKHdlYWssIG5vbmF0b21pYykgSUJPdXRsZXQgVUlUYWJsZVZpZXcgKnRhYmxlVmlldzsKQHByb3BlcnR5IChzdHJvbmcsIG5vbmF0b21pYykgVUlSZWZyZXNoQ29udHJvbCAqcmVmcmVzaENvbnRyb2w7CgpAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBUV01DaGFubmVsICpyZWNlbnRseUFkZGVkQ2hhbm5lbDsKQGVuZAoKc3RhdGljIE5TU3RyaW5nICogY29uc3QgVFdDT3BlbkNoYW5uZWxTZWd1ZSA9IEAiT3BlbkNoYXQiOwpzdGF0aWMgTlNJbnRlZ2VyIGNvbnN0IFRXQ1JlZnJlc2hDb250cm9sWE9mZnNldCA9IDEyMDsKCgpAaW1wbGVtZW50YXRpb24gTWVudVZpZXdDb250cm9sbGVyCgojcHJhZ21hIG1hcmsgSW5pdGlhbGl6YXRpb24KCi0gKHZvaWQpdmlld0RpZExvYWQgewogIFtzdXBlciB2aWV3RGlkTG9hZF07CiAgCiAgVUlJbWFnZVZpZXcgKmJnSW1hZ2UgPSBbW1VJSW1hZ2VWaWV3IGFsbG9jXSBpbml0V2l0aEltYWdlOltVSUltYWdlIGltYWdlTmFtZWQ6QCJob21lLWJnIl1dOwogIGJnSW1hZ2UuZnJhbWUgPSBzZWxmLnRhYmxlVmlldy5mcmFtZTsKICBzZWxmLnRhYmxlVmlldy5iYWNrZ3JvdW5kVmlldyA9IGJnSW1hZ2U7CiAgCiAgc2VsZi51c2VybmFtZUxhYmVsLnRleHQgPSBbUEZVc2VyIGN1cnJlbnRVc2VyXS51c2VybmFtZTsKICAKICBzZWxmLnJlZnJlc2hDb250cm9sID0gW1tVSVJlZnJlc2hDb250cm9sIGFsbG9jXSBpbml0XTsKICBbc2VsZi50YWJsZVZpZXcgYWRkU3VidmlldzpzZWxmLnJlZnJlc2hDb250cm9sXTsKICBbc2VsZi5yZWZyZXNoQ29udHJvbCBhZGRUYXJnZXQ6c2VsZgogICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjpAc2VsZWN0b3IocmVmcmVzaENoYW5uZWxzKQogICAgICAgICAgICAgICAgZm9yQ29udHJvbEV2ZW50czpVSUNvbnRyb2xFdmVudFZhbHVlQ2hhbmdlZF07CiAgc2VsZi5yZWZyZXNoQ29udHJvbC50aW50Q29sb3IgPSBbVUlDb2xvciB3aGl0ZUNvbG9yXTsKICAKICBDR1JlY3QgZnJhbWUgPSBzZWxmLnJlZnJlc2hDb250cm9sLmZyYW1lOwogIGZyYW1lLm9yaWdpbi54ID0gQ0dSZWN0R2V0TWluWChmcmFtZSkgLSBUV0NSZWZyZXNoQ29udHJvbFhPZmZzZXQ7CiAgc2VsZi5yZWZyZXNoQ29udHJvbC5mcmFtZSA9IGZyYW1lOwogIAogIFtDaGFubmVsTWFuYWdlciBzaGFyZWRNYW5hZ2VyXS5kZWxlZ2F0ZSA9IHNlbGY7CiAgW3NlbGYgcG9wdWxhdGVDaGFubmVsc107Cn0KCiNwcmFnbWEgbWFyayAtIFRhYmxlIHZpZXcgZGF0YSBzb3VyY2UKCi0gKE5TSW50ZWdlcil0YWJsZVZpZXc6KFVJVGFibGVWaWV3ICopdGFibGVWaWV3IG51bWJlck9mUm93c0luU2VjdGlvbjooTlNJbnRlZ2VyKXNlY3Rpb24gewogIGlmICghW0NoYW5uZWxNYW5hZ2VyIHNoYXJlZE1hbmFnZXJdLmNoYW5uZWxzKSB7CiAgICByZXR1cm4gMTsKICB9CiAgCiAgcmV0dXJuIFtDaGFubmVsTWFuYWdlciBzaGFyZWRNYW5hZ2VyXS5jaGFubmVscy5jb3VudDsKfQoKLSAoVUlUYWJsZVZpZXdDZWxsICopdGFibGVWaWV3OihVSVRhYmxlVmlldyAqKXRhYmxlVmlldyBjZWxsRm9yUm93QXRJbmRleFBhdGg6KE5TSW5kZXhQYXRoICopaW5kZXhQYXRoIHsKICBVSVRhYmxlVmlld0NlbGwgKmNlbGwgPSBuaWw7CiAgCiAgaWYgKCFbQ2hhbm5lbE1hbmFnZXIgc2hhcmVkTWFuYWdlcl0uY2hhbm5lbHMpIHsKICAgIGNlbGwgPSBbc2VsZiBsb2FkaW5nQ2VsbEZvclRhYmxlVmlldzp0YWJsZVZpZXddOwogIH0KICBlbHNlIHsKICAgIGNlbGwgPSBbc2VsZiBjaGFubmVsQ2VsbEZvclRhYmxlVmlldzp0YWJsZVZpZXcgYXRJbmRleFBhdGg6aW5kZXhQYXRoXTsKICB9CiAgW2NlbGwgbGF5b3V0SWZOZWVkZWRdOwogIAogIHJldHVybiBjZWxsOwp9CgojcHJhZ21hIG1hcmsgLSBUYWJsZSB2aWV3IGRlbGVnYXRlCgotIChCT09MKXRhYmxlVmlldzooVUlUYWJsZVZpZXcgKil0YWJsZVZpZXcgY2FuRWRpdFJvd0F0SW5kZXhQYXRoOihOU0luZGV4UGF0aCAqKWluZGV4UGF0aCB7CiAgVFdNQ2hhbm5lbCAqY2hhbm5lbCA9IFtbQ2hhbm5lbE1hbmFnZXIgc2hhcmVkTWFuYWdlcl0uY2hhbm5lbHMgb2JqZWN0QXRJbmRleDppbmRleFBhdGgucm93XTsKICByZXR1cm4gY2hhbm5lbCAhPSBbQ2hhbm5lbE1hbmFnZXIgc2hhcmVkTWFuYWdlcl0uZ2VuZXJhbENoYW5uZWw7Cn0KCgotICh2b2lkKXRhYmxlVmlldzooVUlUYWJsZVZpZXcgKil0YWJsZVZpZXcgY29tbWl0RWRpdGluZ1N0eWxlOihVSVRhYmxlVmlld0NlbGxFZGl0aW5nU3R5bGUpZWRpdGluZ1N0eWxlIGZvclJvd0F0SW5kZXhQYXRoOihOU0luZGV4UGF0aCAqKWluZGV4UGF0aCB7CiAgaWYgKGVkaXRpbmdTdHlsZSA9PSBVSVRhYmxlVmlld0NlbGxFZGl0aW5nU3R5bGVEZWxldGUpIHsKICAgIFRXTUNoYW5uZWwgKmNoYW5uZWwgPSBbW0NoYW5uZWxNYW5hZ2VyIHNoYXJlZE1hbmFnZXJdLmNoYW5uZWxzIG9iamVjdEF0SW5kZXg6aW5kZXhQYXRoLnJvd107CiAgICBbY2hhbm5lbCBkZXN0cm95V2l0aENvbXBsZXRpb246XihUV01SZXN1bHQgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT0gVFdNUmVzdWx0U3VjY2VzcykgewogICAgICAgIFt0YWJsZVZpZXcgcmVsb2FkRGF0YV07CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgW0FsZXJ0RGlhbG9nQ29udHJvbGxlciBzaG93QWxlcnRXaXRoTWVzc2FnZTpAIllvdSBjYW4gbm90IGRlbGV0ZSB0aGlzIGNoYW5uZWwiIHRpdGxlOm5pbCBwcmVzZW50ZXI6c2VsZl07CiAgICAgIH0KICAgIH1dOwogIH0KfQoKLSAodm9pZCl0YWJsZVZpZXc6KFVJVGFibGVWaWV3ICopdGFibGVWaWV3IGRpZFNlbGVjdFJvd0F0SW5kZXhQYXRoOihOU0luZGV4UGF0aCAqKWluZGV4UGF0aCB7CiAgW3NlbGYgcGVyZm9ybVNlZ3VlV2l0aElkZW50aWZpZXI6VFdDT3BlbkNoYW5uZWxTZWd1ZSBzZW5kZXI6aW5kZXhQYXRoXTsKfQoKI3ByYWdtYSBtYXJrIC0gSW50ZXJuYWwgbWV0aG9kcwoKLSAoVUlUYWJsZVZpZXdDZWxsICopbG9hZGluZ0NlbGxGb3JUYWJsZVZpZXc6KFVJVGFibGVWaWV3ICopdGFibGVWaWV3IHsKICByZXR1cm4gW3RhYmxlVmlldyBkZXF1ZXVlUmV1c2FibGVDZWxsV2l0aElkZW50aWZpZXI6QCJsb2FkaW5nQ2VsbCJdOwp9CgotIChVSVRhYmxlVmlld0NlbGwgKiljaGFubmVsQ2VsbEZvclRhYmxlVmlldzooVUlUYWJsZVZpZXcgKil0YWJsZVZpZXcgYXRJbmRleFBhdGg6KE5TSW5kZXhQYXRoICopaW5kZXhQYXRoIHsKICBNZW51VGFibGVDZWxsICptZW51Q2VsbCA9IChNZW51VGFibGVDZWxsICopW3RhYmxlVmlldyBkZXF1ZXVlUmV1c2FibGVDZWxsV2l0aElkZW50aWZpZXI6QCJjaGFubmVsQ2VsbCIgZm9ySW5kZXhQYXRoOmluZGV4UGF0aF07CiAgCiAgVFdNQ2hhbm5lbCAqY2hhbm5lbCA9IFtbQ2hhbm5lbE1hbmFnZXIgc2hhcmVkTWFuYWdlcl0uY2hhbm5lbHMgb2JqZWN0QXRJbmRleDppbmRleFBhdGgucm93XTsKICBOU1N0cmluZyAqZnJpZW5kbHlOYW1lID0gY2hhbm5lbC5mcmllbmRseU5hbWU7CiAgaWYgKGNoYW5uZWwuZnJpZW5kbHlOYW1lLmxlbmd0aCA9PSAwKSB7CiAgICBmcmllbmRseU5hbWUgPSBAIihubyBmcmllbmRseSBuYW1lKSI7CiAgfQogIG1lbnVDZWxsLmNoYW5uZWxOYW1lID0gZnJpZW5kbHlOYW1lOwogIAogIHJldHVybiBtZW51Q2VsbDsKfQoKLSAodm9pZClyZWZyZXNoQ2hhbm5lbHMgewogIFtzZWxmLnJlZnJlc2hDb250cm9sIGJlZ2luUmVmcmVzaGluZ107CiAgW3NlbGYgcG9wdWxhdGVDaGFubmVsc107Cn0KCi0gKHZvaWQpcG9wdWxhdGVDaGFubmVscyB7CiAgW1tDaGFubmVsTWFuYWdlciBzaGFyZWRNYW5hZ2VyXSBwb3B1bGF0ZUNoYW5uZWxzV2l0aENvbXBsZXRpb246XihCT09MIHN1Y2NlZWRlZCkgewogICAgaWYgKCFzdWNjZWVkZWQpIHsKICAgICAgW0FsZXJ0RGlhbG9nQ29udHJvbGxlciBzaG93QWxlcnRXaXRoTWVzc2FnZTpAIkZhaWxlZCB0byBsb2FkIGNoYW5uZWxzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOkAiSVAgTWVzc2FnaW5nIERlbW8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZW50ZXI6c2VsZl07CiAgICB9CiAgICBbc2VsZi50YWJsZVZpZXcgcmVsb2FkRGF0YV07CiAgICBbc2VsZi5yZWZyZXNoQ29udHJvbCBlbmRSZWZyZXNoaW5nXTsKICB9XTsKfQoKLSAodm9pZClkZXNlbGVjdFNlbGVjdGVkQ2hhbm5lbCB7CiAgTlNJbmRleFBhdGggKnNlbGVjdGVkUm93ID0gW3NlbGYudGFibGVWaWV3IGluZGV4UGF0aEZvclNlbGVjdGVkUm93XTsKCiAgaWYgKHNlbGVjdGVkUm93KSB7CiAgICBbc2VsZi50YWJsZVZpZXcgZGVzZWxlY3RSb3dBdEluZGV4UGF0aDpzZWxlY3RlZFJvdyBhbmltYXRlZDpZRVNdOwogIH0KfQoKI3ByYWdtYSBtYXJrIC0gQ2hhbm5lbAoKLSAodm9pZCljcmVhdGVOZXdDaGFubmVsRGlhbG9nIHsKICBbSW5wdXREaWFsb2dDb250cm9sbGVyIHNob3dXaXRoVGl0bGU6QCJOZXcgQ2hhbm5lbCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6QCJFbnRlciBhIG5hbWUgZm9yIHRoaXMgY2hhbm5lbC4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOkAiTmFtZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZW50ZXI6c2VsZiBoYW5kbGVyOl4oTlNTdHJpbmcgKnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtbQ2hhbm5lbE1hbmFnZXIgc2hhcmVkTWFuYWdlcl0gY3JlYXRlQ2hhbm5lbFdpdGhOYW1lOnRleHQgY29tcGxldGlvbjpuaWxdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dOwp9CgojcHJhZ21hIG1hcmsgLSBUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudERlbGVnYXRlIGRlbGVnYXRlCgotICh2b2lkKWlwTWVzc2FnaW5nQ2xpZW50OihUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudCAqKWNsaWVudCBjaGFubmVsQWRkZWQ6KFRXTUNoYW5uZWwgKiljaGFubmVsIHsKICBbc2VsZi50YWJsZVZpZXcgcmVsb2FkRGF0YV07Cn0KCi0gKHZvaWQpaXBNZXNzYWdpbmdDbGllbnQ6KFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ICopY2xpZW50IGNoYW5uZWxDaGFuZ2VkOihUV01DaGFubmVsICopY2hhbm5lbCB7CiAgW3NlbGYudGFibGVWaWV3IHJlbG9hZERhdGFdOwp9CgotICh2b2lkKWlwTWVzc2FnaW5nQ2xpZW50OihUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudCAqKWNsaWVudCBjaGFubmVsRGVsZXRlZDooVFdNQ2hhbm5lbCAqKWNoYW5uZWwgewogIFtzZWxmLnRhYmxlVmlldyByZWxvYWREYXRhXTsKfQoKI3ByYWdtYSBtYXJrIC0gTG9nb3V0CgotICh2b2lkKXByb210cExvZ291dCB7CiAgVUlBbGVydENvbnRyb2xsZXIgKmFsZXJ0ID0gW1VJQWxlcnRDb250cm9sbGVyIGFsZXJ0Q29udHJvbGxlcldpdGhUaXRsZTpuaWwKICAgIG1lc3NhZ2U6QCJZb3UgYXJlIGFib3V0IHRvIExvZ291dC4iIHByZWZlcnJlZFN0eWxlOlVJQWxlcnRDb250cm9sbGVyU3R5bGVBbGVydF07CiAgCiAgVUlBbGVydEFjdGlvbiAqY2FuY2VsQWN0aW9uID0gW1VJQWxlcnRBY3Rpb24gYWN0aW9uV2l0aFRpdGxlOkAiQ2FuY2VsIgogICAgc3R5bGU6VUlBbGVydEFjdGlvblN0eWxlQ2FuY2VsIGhhbmRsZXI6bmlsXTsKCiAgVUlBbGVydEFjdGlvbiAqY29uZmlybUFjdGlvbiA9IFtVSUFsZXJ0QWN0aW9uIGFjdGlvbldpdGhUaXRsZTpAIkNvbmZpcm0iCiAgICBzdHlsZTpVSUFsZXJ0QWN0aW9uU3R5bGVEZWZhdWx0CiAgICBoYW5kbGVyOl4oVUlBbGVydEFjdGlvbiAqYWN0aW9uKSB7CiAgICAgIFtzZWxmIGxvZ091dF07CiAgICB9XTsKCiAgW2FsZXJ0IGFkZEFjdGlvbjpjYW5jZWxBY3Rpb25dOwogIFthbGVydCBhZGRBY3Rpb246Y29uZmlybUFjdGlvbl07CiAgW3NlbGYgcHJlc2VudFZpZXdDb250cm9sbGVyOmFsZXJ0IGFuaW1hdGVkOllFUyBjb21wbGV0aW9uOm5pbF07Cn0KCi0gKHZvaWQpbG9nT3V0IHsKICBbW0lQTWVzc2FnaW5nTWFuYWdlciBzaGFyZWRNYW5hZ2VyXSBsb2dvdXRdOwogIFtbSVBNZXNzYWdpbmdNYW5hZ2VyIHNoYXJlZE1hbmFnZXJdIHByZXNlbnRSb290Vmlld0NvbnRyb2xsZXJdOwp9CgojcHJhZ21hIG1hcmsgQWN0aW9ucwoKLSAoSUJBY3Rpb24pbG9nb3V0QnV0dG9uVG91Y2hlZDooVUlCdXR0b24gKilzZW5kZXIgewogIFtzZWxmIHByb210cExvZ291dF07Cn0KCi0gKElCQWN0aW9uKW5ld0NoYW5uZWxCdXR0b25Ub3VjaGVkOihVSUJ1dHRvbiAqKXNlbmRlciB7CiAgW3NlbGYgY3JlYXRlTmV3Q2hhbm5lbERpYWxvZ107Cn0KCiNwcmFnbWEgbWFyayAtIE5hdmlnYXRpb24KCi0gKHZvaWQpcHJlcGFyZUZvclNlZ3VlOihVSVN0b3J5Ym9hcmRTZWd1ZSAqKXNlZ3VlIHNlbmRlcjooaWQpc2VuZGVyIHsKICBpZiAoW3NlZ3VlLmlkZW50aWZpZXIgaXNFcXVhbFRvU3RyaW5nOlRXQ09wZW5DaGFubmVsU2VndWVdKSB7CiAgICBOU0luZGV4UGF0aCAqaW5kZXhQYXRoID0gKE5TSW5kZXhQYXRoICopc2VuZGVyOwogICAgCiAgICBUV01DaGFubmVsICpjaGFubmVsID0gW1tDaGFubmVsTWFuYWdlciBzaGFyZWRNYW5hZ2VyXS5jaGFubmVscyBvYmplY3RBdEluZGV4OmluZGV4UGF0aC5yb3ddOwogICAgVUlOYXZpZ2F0aW9uQ29udHJvbGxlciAqbmF2aWdhdGlvbkNvbnRyb2xsZXIgPSBbc2VndWUgZGVzdGluYXRpb25WaWV3Q29udHJvbGxlcl07CiAgICBNYWluQ2hhdFZpZXdDb250cm9sbGVyICpjaGF0Vmlld0NvbnRyb2xsZXIgPSAoTWFpbkNoYXRWaWV3Q29udHJvbGxlciAqKVtuYXZpZ2F0aW9uQ29udHJvbGxlciB2aXNpYmxlVmlld0NvbnRyb2xsZXJdOwogICAgY2hhdFZpZXdDb250cm9sbGVyLmNoYW5uZWwgPSBjaGFubmVsOwogIH0KfQoKI3ByYWdtYSBtYXJrIFN0eWxlCgotIChVSVN0YXR1c0JhclN0eWxlKXByZWZlcnJlZFN0YXR1c0JhclN0eWxlIHsKICByZXR1cm4gVUlTdGF0dXNCYXJTdHlsZUxpZ2h0Q29udGVudDsKfQoKCkBlbmQK</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/twiliochat-objc" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>